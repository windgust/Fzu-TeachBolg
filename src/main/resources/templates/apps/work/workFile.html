<div class="main layui-clear">
	<div class="result">
		<table id="result" class="layui-table" >
			<tr>
				<th >用户id</th>
				<th >标题</th>
				<th >分数</th>
				<th >下载量</th>
				<th>作业</th>
			</tr>
		</table>
	</div>
</div>
<script>
//	function test(){
//  var ajaxData = {
//    type:arguments[0].type || "GET",
//    url:arguments[0].url || "http://localhost/work/find",
//    async:arguments[0].async || "true",
//    data:arguments[0].data || null,
//    dataType:arguments[0].dataType || "text",
//    contentType:arguments[0].contentType || "application/x-www-form-urlencoded",
//    beforeSend:arguments[0].beforeSend || function(){},
//    success:arguments[0].success || function(){},
//    error:arguments[0].error || function(){}
//  }
//  ajaxData.beforeSend()
//  var xhr = createxmlHttpRequest();
//  xhr.responseType=ajaxData.dataType;
//  xhr.open(ajaxData.type,ajaxData.url,ajaxData.async);
//  xhr.setRequestHeader("Content-Type",ajaxData.contentType);
//  xhr.send(convertData(ajaxData.data));
//  xhr.onreadystatechange = function() {
//    if (xhr.readyState == 4) {
//      if(xhr.status == 200){
//        ajaxData.success(xhr.response)
//      }else{
//        ajaxData.error()
//      }
//    }
//  }
//}
//
//function createxmlHttpRequest() {
//  if (window.ActiveXObject) {
//    return new ActiveXObject("Microsoft.XMLHTTP");
//  } else if (window.XMLHttpRequest) {
//    return new XMLHttpRequest();
//  }
//}
//
//function convertData(data){
//  if( typeof data === 'object' ){
//    var convertResult = "" ;
//    for(var c in data){
//      convertResult+= c + "=" + data[c] + "&";
//    }
//    convertResult=convertResult.substring(0,convertResult.length-1)
//    return convertResult;
//  }else{
//    return data;
//  }
//}

function post(url, data, callback){
    $.ajax({
        url: url,
        type: 'POST',
        dataType:"JSON",
        data:  data ||'',
        xhrFields: {
            withCredentials: true
        },
        crossDomain: true,
        success: callback
    });
}

post("http://localhost/work/find",null,function (ret) {
    console.log(ret);
    if(ret.msg == "success"){
        var data = ret.data;
        for (var i = 0; i < data.length; i++){
            $("#result").append('' +
				'<tr>\n' +
                '\t\t\t\t<th >'+data[i].userid+'</th>\n' +
                '\t\t\t\t<th >'+data[i].title+'</th>\n' +
                '\t\t\t\t<th >'+data[i].score+'</th>\n' +
                '\t\t\t\t<th >'+data[i].download+'</th>\n' +
                '\t\t\t\t<th ><a href="http://localhost/work/download/'+data[i].id+'/'+data[i].fileUrl+'">作业</a></th>\n' +
                '\t\t\t</tr>');
		}

	}
})

</script>